<div class="container">
  <header>
    <h1>{{ title() }}</h1>
    <p class="subtitle">Sistema de Logging e Observabilidade</p>
  </header>

  <div class="environment-info">
    <h2>Variáveis de Ambiente</h2>
    <div class="env-grid">
      <div class="env-item">
        <strong>Ambiente:</strong>
        <span>{{ environment.production ? 'Production' : 'Development' }}</span>
      </div>
      <div class="env-item">
        <strong>API URL:</strong>
        <span>{{ environment.apiUrl }}</span>
      </div>
      <div class="env-item">
        <strong>Log Level:</strong>
        <span>{{ environment.logLevel }}</span>
      </div>
      <div class="env-item">
        <strong>Logging Enabled:</strong>
        <span>{{ environment.enableLogging ? 'Yes' : 'No' }}</span>
      </div>
      <div class="env-item">
        <strong>App Name:</strong>
        <span>{{ environment.appName }}</span>
      </div>
      <div class="env-item">
        <strong>Version:</strong>
        <span>{{ environment.version }}</span>
      </div>
    </div>
  </div>

  <div class="actions">
    <h2>Testar Logger</h2>
    <div class="button-group">
      <button (click)="testDebugLog()" class="btn btn-debug">Test DEBUG Log</button>
      <button (click)="testInfoLog()" class="btn btn-info">Test INFO Log</button>
      <button (click)="testWarnLog()" class="btn btn-warn">Test WARN Log</button>
      <button (click)="testErrorLog()" class="btn btn-error">Test ERROR Log</button>
    </div>

    <h2>Testar Observabilidade</h2>
    <div class="button-group">
      <button (click)="testHttpRequest()" class="btn btn-http">Test HTTP Request</button>
      <button (click)="testErrorHandling()" class="btn btn-error-handler">Test Error Handler</button>
    </div>

    <div class="button-group">
      <button (click)="clearLogs()" class="btn btn-clear">Clear Log History</button>
    </div>
  </div>

  <div class="log-history">
    <h2>Log History ({{ logHistory().length }} entries)</h2>
    <div class="log-container">
      @if (logHistory().length === 0) {
        <p class="no-logs">No logs yet. Click the buttons above to generate logs.</p>
      } @else {
        <div class="log-entries">
          @for (log of logHistory(); track log.timestamp) {
            <div class="log-entry" [ngClass]="getLogLevelClass(log.level)">
              <div class="log-header">
                <span class="log-timestamp">{{ log.timestamp | date:'HH:mm:ss.SSS' }}</span>
                <span class="log-level">{{ getLogLevelName(log.level) }}</span>
                <span class="log-source">{{ log.source }}</span>
              </div>
              <div class="log-message">{{ log.message }}</div>
              @if (log.data) {
                <div class="log-data">
                  <pre>{{ log.data | json }}</pre>
                </div>
              }
            </div>
          }
        </div>
      }
    </div>
  </div>

  <div class="instructions">
    <h2>Instruções</h2>
    <ul>
      <li>Abra o Console do navegador (F12) para ver os logs formatados</li>
      <li>Teste diferentes níveis de log para ver como são exibidos</li>
      <li>Teste requisições HTTP para ver o interceptor em ação</li>
      <li>Teste o Error Handler para ver como erros não tratados são capturados</li>
      <li>Verifique as variáveis de ambiente configuradas acima</li>
      <li>Para trocar entre development e production, use: <code>ng serve --configuration=production</code></li>
    </ul>
  </div>

  <router-outlet />
</div>
